!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}new class{constructor(e){}getInitialCards(){}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d117ca4c-01ef-4f19-abee-387b4e32e69d","Content-Type":"application/json"}});class t{constructor(t,s){e(this,"_hasInvalidInput",(e=>e.some((e=>!e.validity.valid)))),e(this,"_toggleButtonState",(()=>{this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=s,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector("#".concat(e.id,"-error"));s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_setInputsEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setInputsEventListeners()}}class s{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_active")||e.target.classList.contains("popup__exit-icon"))&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._formPopupElement=this._popupElement.querySelector(".popup__form"),this._inputList=this._formPopupElement.querySelectorAll(".popup__form-input"),this._submitHandler=t}getInputValues(){const e={};return this._inputList.forEach((t=>{const s=t.name;e[s]=t.value})),e}setEventListeners(){super.setEventListeners(),this._formPopupElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(),this.close()}))}close(){super.close(),this._formPopupElement.reset()}}const i=".elements__list",r=(document.querySelector(i),document.querySelector(".profile__edit-btn")),o=document.querySelector(".profile__add-btn");document.querySelector("#inputName"),document.querySelector("#inputRole");class a{constructor(e,t){let{text:s,image:n,handleCardClick:i}=e;this._text=s,this._image=n,this._templateSelector=t,this._handleCardClick=i,this._element=this._getTemplate(),this._imageItem=this._element.querySelector(".elements__image"),this._textItem=this._element.querySelector(".elements__text"),this._likeItem=this._element.querySelector(".elements__like-btn"),this._deleteItem=this._element.querySelector(".elements__delete-icon")}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".elements__element").cloneNode(!0)}generateCard(){return this._imageItem.src=this._image,this._textItem.textContent=this._text,this._imageItem.alt="view of ".concat(this._text),this.setEventListeners(),this._element}setEventListeners(){this._imageItem.addEventListener("click",(()=>{this._handleCardClick()})),this._likeItem.addEventListener("click",(()=>{this._handleLikeToggle()})),this._deleteItem.addEventListener("click",(()=>{this._handleDeleteCard()}))}_handleDeleteCard(){this._element.remove()}_handleLikeToggle(){this._likeItem.classList.toggle("elements__svg-heart_liked")}}const l=new n("#addImage",(function(){const e=l.getInputValues(),t=e.form__title,s=e.form__imageLink,n={};n.name=t,n.link=s,g.addItem(h(n))})),c=new n("#editProfile",(function(){const e=c.getInputValues();profileUserInfo.setUserInfo(e)})),u=new class extends s{constructor(e){var t,s;super(e),s=(e,t)=>{this._imageFile.src=e,this._imageText.textContent=t,this._imageFile.alt="view of ".concat(t),super.open()},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._imageFile=this._popupElement.querySelector(".popup__imagePopUp"),this._imageText=this._popupElement.querySelector(".popup__imagePopUp-text")}}("#imagePopUp"),p=document.querySelector(".profile__name"),m=document.querySelector(".profile__role"),_={};var d;d={inputSelector:".popup__form-input",submitButtonSelector:".popup__form-submit-btn",inactiveButtonClass:"popup__form-submit-btn_inactive",inputErrorClass:"popup__form-errorMsg",errorClass:"popup__form-errorMsg_active",formSelector:".popup__form"},Array.from(document.querySelectorAll(d.formSelector)).forEach((e=>{const s=new t(d,e),n=e.getAttribute("name");_[n]=s,s.enableValidation()})),c.setEventListeners(),l.setEventListeners();const h=e=>{const t=e.name,s=e.link;u.setEventListeners();const n=new a({text:t,image:s,handleCardClick:()=>{(e=>{e.open(s,t)})(u)}},"#card-template");return n.generateCard()},g=new class{constructor(e,t){let{data:s,renderer:n}=e;this._container=document.querySelector(t),this._items=s,this._renderer=n}renderer(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{g.addItem(h(e))}},i);g.renderer(),r.addEventListener("click",(()=>{const e=profileUserInfo.getUserInfo();inputName.setAttribute("value",e.name),inputRole.setAttribute("value",e.role),_.edit__form.resetValidation(),c.open()})),o.addEventListener("click",(()=>{_.add__form.resetValidation(),l.open()})),fetch("https://around.nomoreparties.co/v1/group-12/users/me",{method:"GET",headers:{authorization:"d117ca4c-01ef-4f19-abee-387b4e32e69d"}}).then((e=>e.json())).then((e=>{p.textContent(e.name),m.textContent("dggds")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDRWpDLEtBQU0sY0FDTmlDLEtBQU0sdURBRVIsQ0FDRWpDLEtBQU0saUJBQ05pQyxLQUFNLDBEQUVSLENBQ0VqQyxLQUFNLFVBQ05pQyxLQUFNLG1EQUVSLENBQ0VqQyxLQUFNLHdCQUNOaUMsS0FBTSxtREFFUixDQUNFakMsS0FBTSxpQkFDTmlDLEtBQU0saURINENScUIsU0FBV3RCLElBQ1RFLEVBQVVDLFFBQVFDLEVBQWFKLE1BR25DN0IsR0FFRitCLEVBQVVvQixXQWlCVmxELEVBQWUvQixpQkFBaUIsU0FBUyxLQUN2QyxNQUFNc0YsRUFBcUJyQixnQkFBZ0JzQixjQUMzQ0MsVUFBVW5ILGFBQWEsUUFBU2lILEVBQW1CM0QsTUFDbkQ4RCxVQUFVcEgsYUFBYSxRQUFTaUgsRUFBbUJJLE1BQ25EakIsRUFBYyxXQUFldkUsa0JBQzdCOEQsRUFBVXBELFVBR1pvQixFQUFjaEMsaUJBQWlCLFNBQVMsS0FDdEN5RSxFQUFjLFVBQWN2RSxrQkFDNUJzRCxFQUFTNUMsVUFHWCtFLE1BQU0sdURBQXdELENBQzVEQyxPQUFRLE1BQ1J4SSxRQUFTLENBQ1BDLGNBQWUsMENBR2hCd0ksTUFBTUMsR0FBUUEsRUFBSUMsU0FDbEJGLE1BQU1HLElBQ0x6QixFQUFTN0UsWUFBWXNHLEVBQU9yRSxNQUM1QjZDLEVBQVM5RSxZQUFZLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY2FyZHNMaXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgIC8vIGNvbnN0cnVjdG9yIGJvZHlcclxuICAgIH1cclxuICBcclxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgICAgLy8gLi4uXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG4gIH1cclxuICBcclxuICBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBcImQxMTdjYTRjLTAxZWYtNGYxOS1hYmVlLTM4N2I0ZTMyZTY5ZFwiLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG4gIH0pOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2V0SW5wdXRzRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRJbnB1dHNFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX2FjdGl2ZVwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfYWN0aXZlXCIpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2V4aXQtaWNvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtUG9wdXBFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPVxyXG4gICAgICB0aGlzLl9mb3JtUG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICB9XHJcblxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRGaWVsZHMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSBpbnB1dC5uYW1lO1xyXG4gICAgICBpbnB1dEZpZWxkc1trZXldID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dEZpZWxkcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1Qb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtUG9wdXBFbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG4gY29uc3QgaW1hZ2VQb3B1cFNlbGVjdG9yID0gXCIjaW1hZ2VQb3BVcFwiO1xyXG4gY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IFwiLmVsZW1lbnRzX19saXN0XCI7XHJcbiBjb25zdCBuYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbiBjb25zdCByb2xlU2VsZWN0b3IgPSBcIi5wcm9maWxlX19yb2xlXCI7XHJcbiBjb25zdCBjYXJkc0VsZW1lbnRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZExpc3RTZWxlY3Rvcik7XHJcbiBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbiBjb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG4gY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dE5hbWVcIik7XHJcbiBjb25zdCBpbnB1dFJvbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0Um9sZVwiKTtcclxuXHJcbiBcclxuIGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXN1Ym1pdC1idG5cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19mb3JtLXN1Ym1pdC1idG5faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2Zvcm0tZXJyb3JNc2dcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWVycm9yTXNnX2FjdGl2ZVwiLFxyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIlxyXG59O1xyXG5cclxuIGV4cG9ydCB7IHJvbGVTZWxlY3RvciwgbmFtZVNlbGVjdG9yLCBpbnB1dE5hbWUsIGlucHV0Um9sZSwgIFxyXG4gICAgIHNldHRpbmdzLCBjYXJkTGlzdFNlbGVjdG9yLFxyXG4gICAgICBwcm9maWxlQWRkQnRuLCBwcm9maWxlRWRpdEJ0biwgY2FyZHNFbGVtZW50c0xpc3QsIGltYWdlUG9wdXBTZWxlY3Rvcn1cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRleHQsIGltYWdlLCBoYW5kbGVDYXJkQ2xpY2sgfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGltYWdlO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2ltYWdlSXRlbSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIik7XHJcbiAgICB0aGlzLl90ZXh0SXRlbSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKTtcclxuICAgIHRoaXMuX2xpa2VJdGVtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ0blwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUl0ZW0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2RlbGV0ZS1pY29uXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9pbWFnZUl0ZW0uc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl90ZXh0SXRlbS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLl9pbWFnZUl0ZW0uYWx0ID0gYHZpZXcgb2YgJHt0aGlzLl90ZXh0fWA7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW1hZ2VJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZVRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlVG9nZ2xlKCkge1xyXG4gICAgdGhpcy5fbGlrZUl0ZW0uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19zdmctaGVhcnRfbGlrZWRcIik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHtcclxuICBzZXR0aW5ncyxcclxuICBuYW1lU2VsZWN0b3IsXHJcbiAgcm9sZVNlbGVjdG9yLFxyXG4gIHByb2ZpbGVBZGRCdG4sXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgaW1hZ2VQb3B1cFNlbGVjdG9yLFxyXG4gIGNhcmRMaXN0U2VsZWN0b3IsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY2FyZHNMaXN0LmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkSW1hZ2VcIiwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0UHJvZmlsZVwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cFNlbGVjdG9yKTtcclxuXHJcbmNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG5jb25zdCB1c2VyUm9sZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm9sZVNlbGVjdG9yKTtcclxuXHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgY2FyZFJlbmRlcmVyID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCB0ZXh0ID0gaXRlbS5uYW1lO1xyXG4gIGNvbnN0IGltYWdlID0gaXRlbS5saW5rO1xyXG4gIGNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChpbWFnZVBvcHVwKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oaW1hZ2UsIHRleHQpO1xyXG4gIH07XHJcblxyXG4gIGltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIHRleHQsXHJcbiAgICAgIGltYWdlLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2soaW1hZ2VQb3B1cCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgZGF0YTogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmRSZW5kZXJlcihpdGVtKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY2FyZExpc3RTZWxlY3RvclxyXG4pO1xyXG5jYXJkc0xpc3QucmVuZGVyZXIoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KCkge1xyXG4gIGNvbnN0IGlucHV0RmllbGRzID0gZWRpdFBvcHVwLmdldElucHV0VmFsdWVzKCk7XHJcbiAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0RmllbGRzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoKSB7XHJcbiAgY29uc3QgaW5wdXRGaWVsZHMgPSBhZGRQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIGNvbnN0IHRleHQgPSBpbnB1dEZpZWxkcy5mb3JtX190aXRsZTtcclxuICBjb25zdCBpbWFnZSA9IGlucHV0RmllbGRzLmZvcm1fX2ltYWdlTGluaztcclxuICBjb25zdCBpdGVtID0ge307XHJcbiAgaXRlbS5uYW1lID0gdGV4dDtcclxuICBpdGVtLmxpbmsgPSBpbWFnZTtcclxuICBjYXJkc0xpc3QuYWRkSXRlbShjYXJkUmVuZGVyZXIoaXRlbSkpO1xyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VyUHJvZmlsZSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBjdXJyZW50VXNlclByb2ZpbGUubmFtZSk7XHJcbiAgaW5wdXRSb2xlLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGN1cnJlbnRVc2VyUHJvZmlsZS5yb2xlKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImVkaXRfX2Zvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGRfX2Zvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmZldGNoKFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVwiLCB7XHJcbiAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZDExN2NhNGMtMDFlZi00ZjE5LWFiZWUtMzg3YjRlMzJlNjlkXCIsXHJcbiAgfSxcclxufSlcclxuICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIHVzZXJOYW1lLnRleHRDb250ZW50KHJlc3VsdC5uYW1lKTtcclxuICAgIHVzZXJSb2xlLnRleHRDb250ZW50KFwiZGdnZHNcIik7XHJcbiAgfSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoaW1hZ2VQb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihpbWFnZVBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VGaWxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlUG9wVXBcIik7XHJcbiAgICB0aGlzLl9pbWFnZVRleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2ltYWdlUG9wVXAtdGV4dFwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbiA9IChpbWFnZSwgdGV4dCkgPT4ge1xyXG4gICAgdGhpcy5faW1hZ2VGaWxlLnNyYyA9IGltYWdlO1xyXG4gICAgdGhpcy5faW1hZ2VUZXh0LnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIHRoaXMuX2ltYWdlRmlsZS5hbHQgPSBgdmlldyBvZiAke3RleHR9YDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICB9XHJcblxyXG4gIHJlbmRlcmVyKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICAgIH0sXHJcbiAgXTsiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiZ2V0SW5pdGlhbENhcmRzIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dExpc3QiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInRoaXMiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsIl9idXR0b25FbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInRleHRDb250ZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3NldElucHV0c0V2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX2Zvcm1Qb3B1cEVsZW1lbnQiLCJfc3VibWl0SGFuZGxlciIsImdldElucHV0VmFsdWVzIiwiaW5wdXRGaWVsZHMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiY2FyZExpc3RTZWxlY3RvciIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZUFkZEJ0biIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidGV4dCIsImltYWdlIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3RleHQiLCJfaW1hZ2UiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9pbWFnZUl0ZW0iLCJfdGV4dEl0ZW0iLCJfbGlrZUl0ZW0iLCJfZGVsZXRlSXRlbSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJzcmMiLCJhbHQiLCJfaGFuZGxlTGlrZVRvZ2dsZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiYWRkUG9wdXAiLCJmb3JtX190aXRsZSIsImZvcm1fX2ltYWdlTGluayIsIml0ZW0iLCJsaW5rIiwiY2FyZHNMaXN0IiwiYWRkSXRlbSIsImNhcmRSZW5kZXJlciIsImVkaXRQb3B1cCIsInByb2ZpbGVVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiaW1hZ2VQb3B1cCIsImltYWdlUG9wdXBTZWxlY3RvciIsIl9pbWFnZUZpbGUiLCJfaW1hZ2VUZXh0IiwidXNlck5hbWUiLCJ1c2VyUm9sZSIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjYXJkIiwiY29udGFpbmVyU2VsZWN0b3IiLCJkYXRhIiwicmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwicHJlcGVuZCIsImN1cnJlbnRVc2VyUHJvZmlsZSIsImdldFVzZXJJbmZvIiwiaW5wdXROYW1lIiwiaW5wdXRSb2xlIiwicm9sZSIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsImpzb24iLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9